<div class="container">
  <div class="card">
    <div class="card-body">
      <form
        class="add-update-form"
        #form="ngForm"
        (ngSubmit)="onSubmit()"
        ngNativeValidate
      >
        <div class="row">
          <div class="col">
            <label for="name"> App <span>*</span></label>
            <input
              type="text"
              name="name"
              class="form-control"
              pattern="^[^-\s][a-zA-Z0-9\s]*$"
              minlength="3"
              maxlength="25"
              [(ngModel)]="passwordData.app"
              #name="ngModel"
              required
              [readonly]="!editableForm"
            />
            <span class="focus-border"> </span>
            <div class="error" *ngIf="message !== ''">*{{ message }}</div>
            <div
              class="error"
              *ngIf="name.invalid && (name.dirty || name.touched)"
            >
              <div *ngIf="name.errors?.['required']">*App is required.</div>
              <div *ngIf="name.errors?.['minlength']">
                *App must be at least 3 characters long.
              </div>
              <div *ngIf="name.errors?.['pattern']">
                *App should be in alphanumeric format.No special
                characters/empty space allowed
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label for="name"> Category </label>
            <input
              type="text"
              name="category"
              class="form-control"
              pattern="^[^-\s][a-zA-Z0-9\s]*$"
              minlength="3"
              maxlength="25"
              [(ngModel)]="passwordData.category"
              #category="ngModel"
              [readonly]="!editableForm"
            />
            <span class="focus-border"> </span>
            <div class="error" *ngIf="message !== ''">*{{ message }}</div>
            <div
              class="error"
              *ngIf="category.invalid && (category.dirty || category.touched)"
            >
              <div *ngIf="category.errors?.['minlength']">
                *Category must be at least 3 characters long.
              </div>
              <div *ngIf="category.errors?.['pattern']">
                *Category should be in alphanumeric format.No special
                characters/empty space allowed
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label for="name"> UserName <span>*</span></label>
            <input
              type="text"
              name="userName"
              class="form-control"
              pattern="^[^\s](.*[^\s])?$"
              minlength="3"
              maxlength="50"
              [(ngModel)]="passwordData.userName"
              #userName="ngModel"
              required
              [readonly]="!editableForm"
            />
            <span class="focus-border"> </span>
            <div class="error" *ngIf="message !== ''">*{{ message }}</div>
            <div
              class="error"
              *ngIf="userName.invalid && (userName.dirty || userName.touched)"
            >
              <div *ngIf="userName.errors?.['required']">
                *UserName is required.
              </div>
              <div *ngIf="userName.errors?.['minlength']">
                *UserName must be at least 3 characters long.
              </div>
              <div *ngIf="userName.errors?.['pattern']">
                *UserName should not contain any empty spaces
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label for="name">Password<span>*</span></label>
            <div class="input-group">
              <div class="d-flex flex-column show-password">
                <input
                  [type]="showPassword ? 'text' : 'password'"
                  name="password"
                  class="form-control"
                  pattern="^[^\s]*$"
                  minlength="3"
                  maxlength="25"
                  [(ngModel)]="passwordData.decryptedPassword"
                  #password="ngModel"
                  required
                  [readonly]="!editableForm"
                />
                <button
                  type="button"
                  class="btn btn-outline-secondary eye-icon"
                  (click)="togglePasswordVisibility()"
                >
                  <i
                    class="fas"
                    [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"
                  ></i>
                </button>
              </div>
            </div>
            <span class="focus-border"></span>
            <div class="error" *ngIf="message !== ''">*{{ message }}</div>
            <div
              class="error"
              *ngIf="password.invalid && (password.dirty || password.touched)"
            >
              <div *ngIf="password.errors?.['required']">
                *Password is required.
              </div>
              <div *ngIf="password.errors?.['minlength']">
                *Password must be at least 3 characters long.
              </div>
              <div *ngIf="password.errors?.['pattern']">
                *Password should not contain any empty spaces
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-end mt-3">
          <button
            class="btn btn-outline-primary"
            type="button"
            (click)="goBackToPasswordsPage()"
          >
            Cancel
          </button>
          <button
            class="add-user btn btn-primary ml-4"
            type="submit"
            [disabled]="isPasswordValid()"
            [hidden]="!editableForm"
          >
            {{ buttonName }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
